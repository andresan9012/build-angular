(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"/ceE":function(t,i,o){"use strict";o.r(i),o.d(i,"CertificadoconfigModule",(function(){return Wt}));var e=o("tyNb"),r=o("PC/O"),c=o("//6i"),n=o("fXoL"),a=o("wZkO"),s=o("3Pt+"),u=o("W3pP"),b=o("ofXK"),l=o("PSD3"),f=o.n(l),m=o("0IaG"),d=o("a/SU"),p=o("K4Z5"),h=o("n3tW"),I=o("JqCM"),C=o("f0Cb"),E=o("gfTr"),g=o("bTqV"),O=o("NFeN"),_=o("/t3+"),T=o("znSr");const R=function(){return{color:"white"}};function A(t,i){if(1&t&&(n.Xb(0,"mat-toolbar",7),n.Xb(1,"mat-icon",8),n.Ic(2,"check"),n.Wb(),n.Xb(3,"span",8),n.Ic(4),n.Wb(),n.Sb(5,"span",9),n.Wb()),2&t){const t=n.jc();n.Eb(1),n.pc("ngStyle",n.rc(3,R)),n.Eb(2),n.pc("ngStyle",n.rc(4,R)),n.Eb(1),n.Jc(t.i18n.CERTIFICADO_CONFIG.PDF_CERTIFICADO_DIALOG.REGISTRO_CORRECTO)}}function S(t,i){if(1&t&&(n.Ic(0),n.Xb(1,"button",10),n.fc("click",(function(){return(0,i.openFileSelector)()})),n.Xb(2,"mat-icon"),n.Ic(3,"cloud_upload"),n.Wb(),n.Wb()),2&t){const t=n.jc();n.Kc(" ",t.i18n.DIALOG_ADJUNTAR.ARRASTRAR," ")}}function G(t,i){if(1&t&&(n.Xb(0,"div"),n.Xb(1,"strong"),n.Ic(2),n.Wb(),n.Ic(3),n.Wb()),2&t){const t=i.$implicit,o=n.jc();n.Eb(2),n.Kc("",o.i18n.DIALOG_ADJUNTAR.ADJUNTO,":"),n.Eb(1),n.Kc(" ",t.relativePath,"\n")}}let W=(()=>{class t{constructor(t,i,o,e,r){this.dialogRef=t,this.data=i,this.certificadoService=o,this.certificadoExternoService=e,this.spinner=r,this.files=[],this.i18n=c.a,this.titleSuccess=!this.data.sinTitleSuccess}ngOnInit(){this.file=null}dropped(t){this.files=t;for(const i of t)i.fileEntry.isFile?i.fileEntry.file(t=>{this.file=t}):this.file=null}onClickCancel(){this.dialogRef.close(),location.reload()}fileOver(t){}fileLeave(t){}guardar(){this.file?(this.spinner.show(),1==this.data.tipoUsuario?this.certificadoService.subirPdf(this.data.id,this.file).subscribe(t=>{this.spinner.hide(),f.a.fire({text:""+c.a.CERTIFICADO_CONFIG.SWAL.SUCCESS_ADJUNTO,icon:"success",confirmButtonText:""+c.a.ACEPTAR}).then(t=>(t.value&&location.reload(),!1))},t=>{this.spinner.hide(),f.a.fire({html:""+Object(d.a)(t,c.a.CERTIFICADO_CONFIG.SWAL.ERROR_ADJUNTO),icon:"error",confirmButtonText:""+c.a.ACEPTAR})}):2==this.data.tipoUsuario&&this.certificadoExternoService.subirPdf(this.data.id,this.file).subscribe(t=>{this.spinner.hide(),f.a.fire({text:""+c.a.CERTIFICADO_CONFIG.SWAL.SUCCESS_ADJUNTO,icon:"success",confirmButtonText:""+c.a.ACEPTAR}).then(t=>(t.value&&location.reload(),!1))},t=>{this.spinner.hide(),f.a.fire({html:""+Object(d.a)(t,c.a.CERTIFICADO_CONFIG.SWAL.ERROR_ADJUNTO),icon:"error",confirmButtonText:""+c.a.ACEPTAR})})):f.a.fire({text:""+c.a.CERTIFICADO_CONFIG.SWAL.WARNING_ADJUNTO,icon:"warning",confirmButtonText:""+c.a.ACEPTAR})}}return t.\u0275fac=function(i){return new(i||t)(n.Rb(m.d),n.Rb(m.a),n.Rb(p.a),n.Rb(h.a),n.Rb(I.c))},t.\u0275cmp=n.Lb({type:t,selectors:[["app-pdf-certificado-dialog"]],decls:20,vars:5,consts:[["color","primary",4,"ngIf"],["mat-dialog-content",""],["dropZoneLabel","Drop files here","accept",".pdf",3,"onFileDrop","onFileOver","onFileLeave"],["ngx-file-drop-content-tmp",""],[4,"ngFor","ngForOf"],["mat-dialog-actions","",2,"text-align","right"],["mat-button","","color","accent",3,"click"],["color","primary"],[3,"ngStyle"],[1,"example-spacer"],["mat-button","",3,"click"]],template:function(t,i){1&t&&(n.Gc(0,A,6,5,"mat-toolbar",0),n.Sb(1,"mat-divider"),n.Xb(2,"div",1),n.Sb(3,"br"),n.Xb(4,"ngx-file-drop",2),n.fc("onFileDrop",(function(t){return i.dropped(t)}))("onFileOver",(function(t){return i.fileOver(t)}))("onFileLeave",(function(t){return i.fileLeave(t)})),n.Gc(5,S,4,1,"ng-template",3),n.Wb(),n.Sb(6,"br"),n.Gc(7,G,4,2,"div",4),n.Sb(8,"br"),n.Xb(9,"p"),n.Ic(10),n.Wb(),n.Wb(),n.Sb(11,"mat-divider"),n.Sb(12,"br"),n.Xb(13,"div",5),n.Xb(14,"button",6),n.fc("click",(function(){return i.guardar()})),n.Xb(15,"mat-icon"),n.Ic(16,"save"),n.Wb(),n.Ic(17),n.Wb(),n.Xb(18,"button",6),n.fc("click",(function(){return i.onClickCancel()})),n.Ic(19),n.Wb(),n.Wb()),2&t&&(n.pc("ngIf",i.titleSuccess),n.Eb(7),n.pc("ngForOf",i.files),n.Eb(3),n.Jc(i.i18n.DIALOG_ADJUNTAR.OBSERVACION),n.Eb(7),n.Kc("",i.i18n.GUARDAR," "),n.Eb(2),n.Kc(" ",i.i18n.OMITIR," "))},directives:[b.m,C.a,E.a,E.b,b.l,g.a,O.a,_.a,T.a,b.n],styles:[".mat-list[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]{height:25px}.font-bold[_ngcontent-%COMP%]{font-weight:700}.div-center[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.example-spacer[_ngcontent-%COMP%]{flex:1 1 auto}"]}),t})();var v=o("uMVU"),D=o("eCBd"),X=o("Wp6s"),F=o("kmnG"),N=o("d3UM"),P=o("FKr1"),x=o("qFsG"),U=o("1jcm"),w=o("iadO"),y=o("MutI");function B(t,i){if(1&t&&(n.Xb(0,"mat-option",16),n.Ic(1),n.Wb()),2&t){const t=i.$implicit;n.pc("value",t.id),n.Eb(1),n.Kc(" ",t.descripcion," ")}}function L(t,i){if(1&t&&(n.Xb(0,"mat-card"),n.Xb(1,"mat-card-title",1),n.Ic(2),n.Wb(),n.Xb(3,"mat-list"),n.Xb(4,"mat-list-item"),n.Xb(5,"label",17),n.Ic(6),n.Wb(),n.Ic(7),n.Wb(),n.Xb(8,"mat-list-item"),n.Xb(9,"label",17),n.Ic(10),n.Wb(),n.Ic(11),n.Wb(),n.Wb(),n.Wb()),2&t){const t=n.jc();n.Eb(2),n.Kc(" ",t.formGroup.controls.nombre_usuario.value," "),n.Eb(4),n.Kc("",t.i18n.DTO.NIT,":"),n.Eb(1),n.Jc(t.formGroup.controls.nit_usuario.value),n.Eb(3),n.Kc("",t.i18n.DTO.CORREO,":"),n.Eb(1),n.Kc(" ",t.formGroup.controls.correo_usuario.value,"")}}function k(t,i){if(1&t&&(n.Xb(0,"mat-option",16),n.Ic(1),n.Wb()),2&t){const t=i.$implicit;n.pc("value",t.id),n.Eb(1),n.Kc(" ",t.descripcion," ")}}let q=(()=>{class t{constructor(t,i,o,e,r,n){this._formBuilder=t,this.proveedorService=i,this.clienteService=o,this.certificadoService=e,this.spinner=r,this.dialog=n,this.tiposUsuarios=[{id:1,descripcion:"Proveedor"},{id:2,descripcion:"Cliente"}],this.tiposCertificados=u.a,this.labelPago="Pago",this.i18n=c.a}ngOnInit(){this.formGroup=this._formBuilder.group({id_tipo_usuario:[0,s.q.required],id_tipo_certificado:[0,s.q.required],pago:[!0],documento_usuario:[0,s.q.required],id_usuario:["",s.q.required],nombre_usuario:["",s.q.required],nit_usuario:["",s.q.required],correo_usuario:["",s.q.required],fecha:[s.q.required]})}guardarCertificado(){f.a.fire({title:""+c.a.CERTIFICADO_CONFIG.SWAL.QUESTION_REGISTRO,icon:"question",showCancelButton:!0,confirmButtonText:""+c.a.SI,cancelButtonText:""+c.a.NO}).then(t=>{if(t.isConfirmed){this.spinner.show();var i=new b.f("en").transform(this.formGroup.controls.fecha.value,"yyyy-MM-dd");this.certificadoService.saveCertificadoUsuarioInterno({tipoCertificado:this.formGroup.controls.id_tipo_certificado.value,empresaId:this.formGroup.controls.id_usuario.value,estadoCertificado:this.formGroup.controls.pago.value?0:1,fecha:i}).subscribe(t=>{if(t){var i={id:t.id,tipoUsuario:1};this.spinner.hide(),this.dialog.open(W,{data:i}),this.formGroup.reset()}},t=>{this.spinner.hide(),f.a.fire({html:""+Object(d.a)(t,c.a.CERTIFICADO_CONFIG.SWAL.ERROR_REGISTRO),icon:"error",confirmButtonText:""+c.a.ACEPTAR})})}})}buscarUsuario(){this.formGroup.controls.id_tipo_usuario.value>0&&this.formGroup.controls.documento_usuario.value>0?1==this.formGroup.controls.id_tipo_usuario.value?this.buscarProveedor(this.formGroup.controls.documento_usuario.value):2==this.formGroup.controls.id_tipo_usuario.value&&this.buscarCliente(this.formGroup.controls.documento_usuario.value):f.a.fire({text:""+c.a.CERTIFICADO_CONFIG.SWAL.WARNING_DIGITE_TIPO_USUARIO,icon:"warning",confirmButtonText:""+c.a.ACEPTAR})}buscarProveedor(t){this.proveedorService.getProveedorByNit(t).subscribe(t=>{t?this.setUsuarioForms(t):this.swalNotFound()},t=>{this.swalNotFound(t)})}buscarCliente(t){this.clienteService.getClienteByNit(t).subscribe(t=>{t?this.setUsuarioForms(t):this.swalNotFound()},t=>{this.swalNotFound(t)})}setUsuarioForms(t){this.formGroup.controls.nit_usuario.setValue(t.nit),this.formGroup.controls.nombre_usuario.setValue(t.nombre),this.formGroup.controls.correo_usuario.setValue(t.correo),this.formGroup.controls.id_usuario.setValue(t.usuarioId)}swalNotFound(t=null){this.limpiarUsuario(),f.a.fire({html:""+Object(d.a)(t,c.a.CERTIFICADO_CONFIG.SWAL.WARNING_NOT_FOUND_USUARIO),icon:"warning",confirmButtonText:""+c.a.ACEPTAR})}limpiarUsuario(){this.formGroup.controls.nombre_usuario.setValue(""),this.formGroup.controls.correo_usuario.setValue(""),this.formGroup.controls.id_usuario.setValue(0)}onChangeToggle(){this.labelPago=this.formGroup.controls.pago.value?this.i18n.PAGO:this.i18n.NO_PAGO}}return t.\u0275fac=function(i){return new(i||t)(n.Rb(s.c),n.Rb(v.a),n.Rb(D.a),n.Rb(p.a),n.Rb(I.c),n.Rb(m.b))},t.\u0275cmp=n.Lb({type:t,selectors:[["certificado-config-usuario-interno"]],decls:48,vars:14,consts:[[1,"contenedor"],[1,"div-center"],[3,"formGroup"],["formControlName","id_tipo_usuario","required","",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["matInput","","type","number","formControlName","documento_usuario",3,"focusout"],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Buscar","type","button","color","accent",3,"click"],[4,"ngIf"],["formControlName","pago","color","accent",3,"change"],["formControlName","id_tipo_certificado","required",""],["appearance","fill"],["formControlName","fecha","matInput","",3,"matDatepicker"],["matSuffix","",3,"for"],["picker",""],[1,"div-right"],["mat-button","","color","accent",3,"disabled","click"],[3,"value"],[1,"font-bold"]],template:function(t,i){if(1&t&&(n.Xb(0,"mat-card",0),n.Xb(1,"mat-card-title",1),n.Ic(2),n.Wb(),n.Sb(3,"br"),n.Sb(4,"br"),n.Xb(5,"form",2),n.Xb(6,"mat-form-field"),n.Xb(7,"mat-label"),n.Ic(8),n.Wb(),n.Xb(9,"mat-select",3),n.fc("selectionChange",(function(){return i.limpiarUsuario()})),n.Xb(10,"mat-option"),n.Ic(11,"--"),n.Wb(),n.Gc(12,B,2,2,"mat-option",4),n.Wb(),n.Wb(),n.Xb(13,"mat-form-field"),n.Xb(14,"mat-label"),n.Ic(15),n.Wb(),n.Xb(16,"input",5),n.fc("focusout",(function(){return i.buscarUsuario()})),n.Wb(),n.Xb(17,"button",6),n.fc("click",(function(){return i.buscarUsuario()})),n.Xb(18,"mat-icon"),n.Ic(19,"search"),n.Wb(),n.Wb(),n.Wb(),n.Gc(20,L,12,5,"mat-card",7),n.Sb(21,"br"),n.Xb(22,"mat-slide-toggle",8),n.fc("change",(function(){return i.onChangeToggle()})),n.Ic(23),n.Wb(),n.Sb(24,"br"),n.Sb(25,"br"),n.Xb(26,"mat-form-field"),n.Xb(27,"mat-label"),n.Ic(28),n.Wb(),n.Xb(29,"mat-select",9),n.Xb(30,"mat-option"),n.Ic(31,"--"),n.Wb(),n.Gc(32,k,2,2,"mat-option",4),n.Wb(),n.Wb(),n.Xb(33,"mat-form-field",10),n.Xb(34,"mat-label"),n.Ic(35),n.Wb(),n.Sb(36,"input",11),n.Sb(37,"mat-datepicker-toggle",12),n.Sb(38,"mat-datepicker",null,13),n.Wb(),n.Sb(40,"mat-divider"),n.Sb(41,"br"),n.Sb(42,"br"),n.Xb(43,"div",14),n.Xb(44,"button",15),n.fc("click",(function(){return i.guardarCertificado()})),n.Xb(45,"mat-icon"),n.Ic(46,"save"),n.Wb(),n.Ic(47),n.Wb(),n.Wb(),n.Wb(),n.Wb()),2&t){const t=n.wc(39);n.Eb(2),n.Kc(" ",i.i18n.CERTIFICADO_CONFIG.TITLE_REGISTRAR," "),n.Eb(3),n.pc("formGroup",i.formGroup),n.Eb(3),n.Jc(i.i18n.CERTIFICADO_CONFIG.INTERNO.TIPO_USUARIO),n.Eb(4),n.pc("ngForOf",i.tiposUsuarios),n.Eb(3),n.Jc(i.i18n.BUSCAR_NIT),n.Eb(5),n.pc("ngIf",i.formGroup.controls.id_usuario.value),n.Eb(3),n.Jc(i.labelPago),n.Eb(5),n.Jc(i.i18n.DTO.TIPO_CERTIFICADO),n.Eb(4),n.pc("ngForOf",i.tiposCertificados),n.Eb(3),n.Jc(i.i18n.DTO.FECHA),n.Eb(1),n.pc("matDatepicker",t),n.Eb(1),n.pc("for",t),n.Eb(7),n.pc("disabled",i.formGroup.invalid),n.Eb(3),n.Kc("",i.i18n.DTO.GUARDAR," ")}},directives:[X.a,X.i,s.r,s.k,s.e,F.c,F.f,N.a,s.j,s.d,s.p,P.n,b.l,x.b,s.n,s.b,g.a,F.g,O.a,b.m,U.a,w.b,w.d,w.a,C.a,y.a,y.b],styles:[".contenedor[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:1rem auto;max-width:600px}.mat-form-field[_ngcontent-%COMP%], .mat-form-field2[_ngcontent-%COMP%]{width:100%}.mat-list[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]{height:25px}.div-center[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.div-right[_ngcontent-%COMP%]{float:right}.material-icons.mat-icon[_ngcontent-%COMP%]{font-size:24px;height:24px;width:24px}.font-bold[_ngcontent-%COMP%]{font-weight:700}"]}),t})();function j(t,i){if(1&t&&(n.Xb(0,"mat-icon"),n.Ic(1,"perm_identity"),n.Wb(),n.Ic(2)),2&t){const t=n.jc();n.Eb(2),n.Kc("",t.i18n.CERTIFICADO_CONFIG.EXTERNO.EXISTENTE," ")}}function M(t,i){if(1&t&&(n.Xb(0,"mat-card"),n.Xb(1,"mat-card-title",19),n.Ic(2),n.Wb(),n.Xb(3,"mat-list"),n.Xb(4,"mat-list-item"),n.Xb(5,"label",20),n.Ic(6),n.Wb(),n.Ic(7),n.Wb(),n.Xb(8,"mat-list-item"),n.Xb(9,"label",20),n.Ic(10),n.Wb(),n.Ic(11),n.Wb(),n.Wb(),n.Wb()),2&t){const t=n.jc();n.Eb(2),n.Kc(" ",t.formGroup.controls.nombre_usuario.value," "),n.Eb(4),n.Kc("",t.i18n.DTO.NIT,":"),n.Eb(1),n.Jc(t.formGroup.controls.documento_usuario.value),n.Eb(3),n.Kc("",t.i18n.DTO.CORREO,":"),n.Eb(1),n.Kc(" ",t.formGroup.controls.correo_usuario.value,"")}}function K(t,i){if(1&t&&(n.Xb(0,"mat-icon"),n.Ic(1,"supervisor_account"),n.Wb(),n.Ic(2)),2&t){const t=n.jc();n.Eb(2),n.Kc("",t.i18n.CERTIFICADO_CONFIG.EXTERNO.NUEVO," ")}}function J(t,i){if(1&t&&(n.Xb(0,"mat-option",21),n.Ic(1),n.Wb()),2&t){const t=i.$implicit;n.pc("value",t.id),n.Eb(1),n.Kc(" ",t.descripcion," ")}}let V=(()=>{class t{constructor(t,i,o,e){this._formBuilder=t,this.certificadoExternoService=i,this.spinner=o,this.dialog=e,this.tiposCertificados=u.a,this.labelPago="Pago",this.clave="",this.i18n=c.a}ngOnInit(){this.formGroup=this._formBuilder.group({id_tipo_certificado:[0,s.q.required],pago:[!0],documento_usuario:[0,s.q.required],id_usuario:["",s.q.required],nombre_usuario:["",s.q.required],correo_usuario:["",[s.q.required,s.q.pattern("^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$")]],fecha:[s.q.required]})}guardarCertificado(){f.a.fire({title:""+c.a.CERTIFICADO_CONFIG.SWAL.QUESTION_REGISTRO,icon:"question",showCancelButton:!0,confirmButtonText:""+c.a.SI,cancelButtonText:""+c.a.NO}).then(t=>{if(t.isConfirmed){this.spinner.show(),this.clave||(this.clave=this.formGroup.controls.documento_usuario.value.toString());var i=new b.f("en").transform(this.formGroup.controls.fecha.value,"yyyy-MM-dd");this.certificadoExternoService.saveCertificadoUsuarioExterno({tipoCertificado:this.formGroup.controls.id_tipo_certificado.value,nit:this.formGroup.controls.documento_usuario.value,nombreEmpresa:this.formGroup.controls.nombre_usuario.value,correo:this.formGroup.controls.correo_usuario.value,clave:this.clave,estadoCertificado:this.formGroup.controls.pago.value?0:1,fecha:i}).subscribe(t=>{if(t){var i={id:t.id,tipoUsuario:2};this.spinner.hide(),this.dialog.open(W,{data:i}),this.formGroup.reset()}},t=>{this.spinner.hide(),f.a.fire({html:""+Object(d.a)(t,c.a.CERTIFICADO_CONFIG.SWAL.ERROR_REGISTRO),icon:"error",confirmButtonText:""+c.a.ACEPTAR})})}})}buscarUsuario(){this.formGroup.controls.documento_usuario.value>0?this.certificadoExternoService.getUsuarioExternoByNit(this.formGroup.controls.documento_usuario.value).subscribe(t=>{t?this.setUsuarioForms(t):this.swalNotFound()},t=>{this.swalNotFound(t)}):f.a.fire({text:""+c.a.CERTIFICADO_CONFIG.SWAL.WARNING_DIGITE_USUARIO,icon:"warning",confirmButtonText:""+c.a.ACEPTAR})}swalNotFound(t=null){this.limpiarUsuario(),f.a.fire({html:""+Object(d.a)(t,c.a.CERTIFICADO_CONFIG.SWAL.WARNING_NOT_FOUND_USUARIO),icon:"warning",confirmButtonText:""+c.a.ACEPTAR})}limpiarUsuario(){this.clave="",this.formGroup.controls.nombre_usuario.setValue(""),this.formGroup.controls.correo_usuario.setValue(""),this.formGroup.controls.id_usuario.setValue(0)}setUsuarioForms(t){this.clave=t.clave,this.formGroup.controls.documento_usuario.setValue(t.nit),this.formGroup.controls.nombre_usuario.setValue(t.nombreEmpresa),this.formGroup.controls.correo_usuario.setValue(t.correo),this.formGroup.controls.id_usuario.setValue(t.id)}onChangeToggle(){this.labelPago=this.formGroup.controls.pago.value?this.i18n.PAGO:this.i18n.NO_PAGO}onChangeTab(t){this.limpiarUsuario(),this.formGroup.controls.documento_usuario.setValue(0)}}return t.\u0275fac=function(i){return new(i||t)(n.Rb(s.c),n.Rb(h.a),n.Rb(I.c),n.Rb(m.b))},t.\u0275cmp=n.Lb({type:t,selectors:[["certificado-config-usuario-externo"]],decls:60,vars:18,consts:[[1,"contenedor"],[3,"formGroup"],[3,"selectedIndex","selectedIndexChange"],["mat-tab-label",""],["matInput","","type","number","formControlName","documento_usuario",3,"focusout"],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Buscar","color","accent","type","button",3,"click"],[4,"ngIf"],["matInput","","placeholder","Nombre","formControlName","nombre_usuario","required",""],["matInput","","type","number","formControlName","documento_usuario","required","",3,"placeholder"],["matInput","","formControlName","correo_usuario","required","",3,"placeholder"],["formControlName","id_tipo_certificado","required",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","pago","color","accent",3,"change"],["appearance","fill"],["formControlName","fecha","matInput","",3,"matDatepicker"],["matSuffix","",3,"for"],["picker",""],[1,"div-right"],["mat-button","","color","accent",3,"disabled","click"],[1,"div-center"],[1,"font-bold"],[3,"value"]],template:function(t,i){if(1&t&&(n.Xb(0,"mat-card",0),n.Xb(1,"mat-card-title"),n.Ic(2),n.Wb(),n.Xb(3,"form",1),n.Xb(4,"mat-tab-group",2),n.fc("selectedIndexChange",(function(t){return i.onChangeTab(t)})),n.Xb(5,"mat-tab"),n.Gc(6,j,3,1,"ng-template",3),n.Sb(7,"br"),n.Xb(8,"mat-form-field"),n.Xb(9,"mat-label"),n.Ic(10),n.Wb(),n.Xb(11,"input",4),n.fc("focusout",(function(){return i.buscarUsuario()})),n.Wb(),n.Xb(12,"button",5),n.fc("click",(function(){return i.buscarUsuario()})),n.Xb(13,"mat-icon"),n.Ic(14,"search"),n.Wb(),n.Wb(),n.Wb(),n.Gc(15,M,12,5,"mat-card",6),n.Wb(),n.Xb(16,"mat-tab"),n.Gc(17,K,3,1,"ng-template",3),n.Sb(18,"br"),n.Xb(19,"mat-form-field"),n.Xb(20,"mat-label"),n.Ic(21),n.Wb(),n.Sb(22,"input",7),n.Wb(),n.Xb(23,"mat-form-field"),n.Xb(24,"mat-label"),n.Ic(25),n.Wb(),n.Sb(26,"input",8),n.Wb(),n.Xb(27,"mat-form-field"),n.Xb(28,"mat-label"),n.Ic(29),n.Wb(),n.Sb(30,"input",9),n.Wb(),n.Wb(),n.Wb(),n.Sb(31,"br"),n.Sb(32,"mat-divider"),n.Sb(33,"br"),n.Xb(34,"mat-form-field"),n.Xb(35,"mat-label"),n.Ic(36),n.Wb(),n.Xb(37,"mat-select",10),n.Xb(38,"mat-option"),n.Ic(39,"--"),n.Wb(),n.Gc(40,J,2,2,"mat-option",11),n.Wb(),n.Wb(),n.Xb(41,"mat-slide-toggle",12),n.fc("change",(function(){return i.onChangeToggle()})),n.Ic(42),n.Wb(),n.Sb(43,"br"),n.Sb(44,"br"),n.Xb(45,"mat-form-field",13),n.Xb(46,"mat-label"),n.Ic(47),n.Wb(),n.Sb(48,"input",14),n.Sb(49,"mat-datepicker-toggle",15),n.Sb(50,"mat-datepicker",null,16),n.Wb(),n.Sb(52,"mat-divider"),n.Sb(53,"br"),n.Sb(54,"br"),n.Xb(55,"div",17),n.Xb(56,"button",18),n.fc("click",(function(){return i.guardarCertificado()})),n.Xb(57,"mat-icon"),n.Ic(58,"save"),n.Wb(),n.Ic(59),n.Wb(),n.Wb(),n.Wb(),n.Wb()),2&t){const t=n.wc(51);n.Eb(2),n.Kc(" ",i.i18n.CERTIFICADO_CONFIG.TITLE_REGISTRAR," "),n.Eb(1),n.pc("formGroup",i.formGroup),n.Eb(1),n.pc("selectedIndex",0),n.Eb(6),n.Jc(i.i18n.BUSCAR_NIT),n.Eb(5),n.pc("ngIf",i.formGroup.controls.id_usuario.value),n.Eb(6),n.Jc(i.i18n.DTO.NOMBRE_EMPRESA),n.Eb(4),n.Jc(i.i18n.DTO.NIT),n.Eb(1),n.pc("placeholder",i.i18n.DTO.NIT),n.Eb(3),n.Jc(i.i18n.DTO.CORREO),n.Eb(1),n.pc("placeholder",i.i18n.DTO.CORREO),n.Eb(6),n.Jc(i.i18n.DTO.TIPO_CERTIFICADO),n.Eb(4),n.pc("ngForOf",i.tiposCertificados),n.Eb(2),n.Jc(i.labelPago),n.Eb(5),n.Jc(i.i18n.DTO.FECHA),n.Eb(1),n.pc("matDatepicker",t),n.Eb(1),n.pc("for",t),n.Eb(7),n.pc("disabled",i.formGroup.invalid),n.Eb(3),n.Kc("",i.i18n.GUARDAR," ")}},directives:[X.a,X.i,s.r,s.k,s.e,a.b,a.a,a.c,F.c,F.f,x.b,s.n,s.b,s.j,s.d,g.a,F.g,O.a,b.m,s.p,C.a,N.a,P.n,b.l,U.a,w.b,w.d,w.a,y.a,y.b],styles:[".contenedor[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:1rem auto;max-width:600px}.mat-form-field[_ngcontent-%COMP%], .mat-form-field2[_ngcontent-%COMP%]{width:100%}.mat-list[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]{height:25px}.div-center[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.div-right[_ngcontent-%COMP%]{float:right}"]}),t})();var z=o("Q6lY"),$=o("+0xr"),H=o("M9IT"),Q=o("Qu3c"),Y=o("dW2I"),Z=o("nOyv");function tt(t,i){if(1&t&&(n.Xb(0,"th",17),n.Ic(1),n.Wb()),2&t){const t=n.jc();n.Eb(1),n.Jc(t.i18n.DTO.FECHA)}}function it(t,i){if(1&t&&(n.Xb(0,"td",18),n.Ic(1),n.kc(2,"date"),n.Wb()),2&t){const t=i.$implicit;n.Eb(1),n.Kc("",n.mc(2,1,t.fecha,"dd/MM/yyyy")," ")}}function ot(t,i){if(1&t&&(n.Xb(0,"th",17),n.Ic(1),n.Wb()),2&t){const t=n.jc();n.Eb(1),n.Jc(t.i18n.DTO.NOMBRE_EMPRESA)}}function et(t,i){if(1&t&&(n.Xb(0,"td",18),n.Ic(1),n.Wb()),2&t){const t=i.$implicit,o=n.jc();n.Eb(1),n.Kc(" ",o.nombreEmpresa(t.empresa)," ")}}function rt(t,i){if(1&t&&(n.Xb(0,"th",17),n.Ic(1),n.Wb()),2&t){const t=n.jc();n.Eb(1),n.Jc(t.i18n.DTO.TIPO_CERTIFICADO)}}function ct(t,i){if(1&t&&(n.Xb(0,"td",18),n.Ic(1),n.kc(2,"tipoCertificadoPipe"),n.Wb()),2&t){const t=i.$implicit;n.Eb(1),n.Kc(" ",n.lc(2,1,t.tipoCertificado)," ")}}function nt(t,i){if(1&t&&(n.Xb(0,"th",17),n.Ic(1),n.Wb()),2&t){const t=n.jc();n.Eb(1),n.Jc(t.i18n.DTO.ESTADO_CERTIFICADO)}}function at(t,i){if(1&t&&(n.Xb(0,"td",18),n.Ic(1),n.kc(2,"pagoPipe"),n.Wb()),2&t){const t=i.$implicit;n.Eb(1),n.Kc(" ",n.lc(2,1,t.estadoCertificado)," ")}}function st(t,i){1&t&&n.Sb(0,"th",19)}function ut(t,i){if(1&t){const t=n.Yb();n.Xb(0,"td",18),n.Xb(1,"button",20),n.fc("click",(function(){n.zc(t);const o=i.$implicit;return n.jc().descargarPdf(o)})),n.Xb(2,"mat-icon"),n.Ic(3,"picture_as_pdf"),n.Wb(),n.Wb(),n.Wb()}if(2&t){const t=n.jc();n.Eb(1),n.pc("matTooltip",t.i18n.DESCARGAR_CERTIFICADO_PDF)}}function bt(t,i){1&t&&n.Sb(0,"th",19)}function lt(t,i){if(1&t){const t=n.Yb();n.Xb(0,"td",18),n.Xb(1,"button",20),n.fc("click",(function(){n.zc(t);const o=i.$implicit;return n.jc().cargar(o)})),n.Xb(2,"mat-icon"),n.Ic(3,"cloud_upload"),n.Wb(),n.Wb(),n.Wb()}if(2&t){const t=n.jc();n.Eb(1),n.pc("matTooltip",t.i18n.CARGAR_CERTIFICADO_PDF)}}function ft(t,i){1&t&&n.Sb(0,"th",19)}function mt(t,i){if(1&t){const t=n.Yb();n.Xb(0,"td",18),n.Xb(1,"button",20),n.fc("click",(function(){n.zc(t);const o=i.$implicit;return n.jc().editar(o)})),n.Xb(2,"mat-icon"),n.Ic(3,"edit"),n.Wb(),n.Wb(),n.Wb()}if(2&t){const t=n.jc();n.Eb(1),n.pc("matTooltip",t.i18n.EDITAR)}}function dt(t,i){1&t&&n.Sb(0,"th",19)}function pt(t,i){if(1&t){const t=n.Yb();n.Xb(0,"td",18),n.Xb(1,"button",20),n.fc("click",(function(){n.zc(t);const o=i.$implicit;return n.jc().eliminar(o)})),n.Xb(2,"mat-icon"),n.Ic(3,"delete"),n.Wb(),n.Wb(),n.Wb()}if(2&t){const t=n.jc();n.Eb(1),n.pc("matTooltip",t.i18n.ELIMINAR)}}function ht(t,i){1&t&&n.Sb(0,"tr",21)}function It(t,i){1&t&&n.Sb(0,"tr",22)}let Ct=(()=>{class t{constructor(t,i,o){this.certificadoService=t,this.dialog=i,this.spinner=o,this.displayedColumns=["Fecha","RazonSocial","Tipo","Estado","Descarga","Carga","Edit","Delete"],this.paginacion=new z.a,this.paginacion.paginaNumero=1,this.paginacion.paginaSize=10,this.i18n=c.a}ngOnInit(){this.certificadoService.getTodosCertificadosPaginados(this.paginacion).subscribe(t=>{this.certificadosToken=t.items,this.totalPaginas=10*t.totalPaginas,this.registroPorPagina=t.registroPorPagina})}cargar(t){f.a.fire({title:""+c.a.CERTIFICADO_CONFIG.SWAL.QUESTION_CARGA_PDF,icon:"question",showCancelButton:!0,confirmButtonText:""+c.a.SI,cancelButtonText:""+c.a.NO}).then(i=>{i.isConfirmed&&this.dialog.open(W,{data:{id:t.id,tipoUsuario:1,sinTitleSuccess:!0}})})}descargarPdf(t){1!==t.estadoCertificado?this.certificadoService.descargarPdf(t.id).subscribe(t=>{if(null!==t&&t instanceof Blob){const i=new Blob([t],{type:"application/pdf"}),o=window.URL.createObjectURL(i);window.open(o)}else f.a.fire({text:""+t,icon:"error",confirmButtonText:""+c.a.ACEPTAR})},t=>{f.a.fire({html:""+Object(d.a)(t,c.a.CERTIFICADO_CONFIG.SWAL.ERROR_DESCARGA),icon:"error",confirmButtonText:""+c.a.ACEPTAR})}):f.a.fire({text:""+c.a.CERTIFICADO_CONFIG.SWAL.ERROR_DESCARGA_PAGO,icon:"error",confirmButtonText:""+c.a.ACEPTAR})}editar(t){f.a.fire({title:`\xbfEst\xe1 Seguro que Desea actualizar estado de este certificado de '${0===t.estadoCertificado?"Pago":"No Pago"}' a \u2018${0!==t.estadoCertificado?"Pago":"No Pago"}\u2019? `,icon:"question",showCancelButton:!0,confirmButtonText:""+c.a.SI,cancelButtonText:""+c.a.NO}).then(i=>{if(i.isConfirmed){this.spinner.show();let i=t;i.estadoCertificado=0===i.estadoCertificado?1:0,this.certificadoService.editar(i).subscribe(()=>{this.spinner.hide(),f.a.fire({text:""+c.a.CERTIFICADO_CONFIG.SWAL.SUCCESS_EDIT,icon:"success",confirmButtonText:""+c.a.ACEPTAR}).then(o=>{t=i})},t=>{this.spinner.hide(),f.a.fire({html:""+Object(d.a)(t,c.a.CERTIFICADO_CONFIG.SWAL.ERROR_EDIT),icon:"error",confirmButtonText:""+c.a.ACEPTAR})})}})}eliminar(t){f.a.fire({title:""+c.a.CERTIFICADO_CONFIG.SWAL.QUESTION_DELETE,icon:"question",showCancelButton:!0,confirmButtonText:""+c.a.SI,cancelButtonText:""+c.a.NO}).then(i=>{i.isConfirmed&&(this.spinner.show(),this.certificadoService.eliminar(t.id).subscribe(()=>{this.spinner.hide(),f.a.fire({text:""+c.a.CERTIFICADO_CONFIG.SWAL.SUCCESS_DELETE,icon:"success",confirmButtonText:""+c.a.ACEPTAR}).then(t=>{location.reload()})},t=>{this.spinner.hide(),f.a.fire({html:""+Object(d.a)(t,c.a.CERTIFICADO_CONFIG.SWAL.ERROR_DELETE),icon:"error",confirmButtonText:""+c.a.ACEPTAR})}))})}nombreEmpresa(t){return t.cliente?t.cliente.nombre:t.proveedor?t.proveedor.nombre:"Sin Definir"}paginationData(t){this.spinner.show(),this.paginacion.paginaNumero=t.pageIndex+1,this.certificadoService.getTodosCertificadosPaginados(this.paginacion).subscribe(t=>{this.certificadosToken=t.items,this.totalPaginas=10*t.totalPaginas,this.registroPorPagina=t.registroPorPagina,this.spinner.hide()},t=>{this.spinner.hide()})}}return t.\u0275fac=function(i){return new(i||t)(n.Rb(p.a),n.Rb(m.b),n.Rb(I.c))},t.\u0275cmp=n.Lb({type:t,selectors:[["certificado-config-certificados"]],decls:31,vars:6,consts:[[1,"contenedor"],[1,"div-center"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","Fecha"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","RazonSocial"],["matColumnDef","Tipo"],["matColumnDef","Estado"],["matColumnDef","Descarga"],["mat-header-cell","","width","5%",4,"matHeaderCellDef"],["matColumnDef","Carga"],["matColumnDef","Edit"],["matColumnDef","Delete"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"pageSize","length","page"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","","width","5%"],["mat-button","","color","accent",3,"matTooltip","click"],["mat-header-row",""],["mat-row",""]],template:function(t,i){1&t&&(n.Xb(0,"mat-card",0),n.Xb(1,"mat-card-title",1),n.Ic(2),n.Wb(),n.Xb(3,"table",2),n.Vb(4,3),n.Gc(5,tt,2,1,"th",4),n.Gc(6,it,3,4,"td",5),n.Ub(),n.Vb(7,6),n.Gc(8,ot,2,1,"th",4),n.Gc(9,et,2,1,"td",5),n.Ub(),n.Vb(10,7),n.Gc(11,rt,2,1,"th",4),n.Gc(12,ct,3,3,"td",5),n.Ub(),n.Vb(13,8),n.Gc(14,nt,2,1,"th",4),n.Gc(15,at,3,3,"td",5),n.Ub(),n.Vb(16,9),n.Gc(17,st,1,0,"th",10),n.Gc(18,ut,4,1,"td",5),n.Ub(),n.Vb(19,11),n.Gc(20,bt,1,0,"th",10),n.Gc(21,lt,4,1,"td",5),n.Ub(),n.Vb(22,12),n.Gc(23,ft,1,0,"th",10),n.Gc(24,mt,4,1,"td",5),n.Ub(),n.Vb(25,13),n.Gc(26,dt,1,0,"th",10),n.Gc(27,pt,4,1,"td",5),n.Ub(),n.Gc(28,ht,1,0,"tr",14),n.Gc(29,It,1,0,"tr",15),n.Wb(),n.Xb(30,"mat-paginator",16),n.fc("page",(function(t){return i.pageEvent=i.paginationData(t)})),n.Wb(),n.Wb()),2&t&&(n.Eb(2),n.Kc(" ",i.i18n.CERTIFICADO_CONFIG.TITLE_CERTIFICADOS," "),n.Eb(1),n.pc("dataSource",i.certificadosToken),n.Eb(25),n.pc("matHeaderRowDef",i.displayedColumns),n.Eb(1),n.pc("matRowDefColumns",i.displayedColumns),n.Eb(1),n.pc("pageSize",i.registroPorPagina)("length",i.totalPaginas))},directives:[X.a,X.i,$.j,$.c,$.e,$.b,$.g,$.i,H.a,$.d,$.a,g.a,Q.a,O.a,$.f,$.h],pipes:[b.f,Y.a,Z.a],styles:["table[_ngcontent-%COMP%]{width:100%}.contenedor[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:1rem auto;max-width:80%}.div-center[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}"]}),t})();function Et(t,i){if(1&t&&(n.Xb(0,"mat-icon"),n.Ic(1,"perm_identity"),n.Wb(),n.Ic(2)),2&t){const t=n.jc();n.Eb(2),n.Kc("",t.i18n.CERTIFICADO_CONFIG.TAB_INTERNO," ")}}function gt(t,i){if(1&t&&(n.Xb(0,"mat-icon"),n.Ic(1,"supervisor_account"),n.Wb(),n.Ic(2)),2&t){const t=n.jc();n.Eb(2),n.Kc("",t.i18n.CERTIFICADO_CONFIG.TAB_EXTERNO," ")}}function Ot(t,i){if(1&t&&(n.Xb(0,"mat-icon"),n.Ic(1,"military_tech"),n.Wb(),n.Ic(2)),2&t){const t=n.jc();n.Eb(2),n.Kc("",t.i18n.CERTIFICADO_CONFIG.TAB_CERTIFICADOS," ")}}const _t=[{path:"",component:(()=>{class t{constructor(){this.i18n=c.a}ngOnInit(){}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=n.Lb({type:t,selectors:[["app-certificado-config-main"]],decls:10,vars:0,consts:[["mat-tab-label",""]],template:function(t,i){1&t&&(n.Xb(0,"mat-tab-group"),n.Xb(1,"mat-tab"),n.Gc(2,Et,3,1,"ng-template",0),n.Sb(3,"certificado-config-usuario-interno"),n.Wb(),n.Xb(4,"mat-tab"),n.Gc(5,gt,3,1,"ng-template",0),n.Sb(6,"certificado-config-usuario-externo"),n.Wb(),n.Xb(7,"mat-tab"),n.Gc(8,Ot,3,1,"ng-template",0),n.Sb(9,"certificado-config-certificados"),n.Wb(),n.Wb())},directives:[a.b,a.a,a.c,q,V,Ct,O.a],styles:[""]}),t})(),canActivate:[r.a]}];let Tt=(()=>{class t{}return t.\u0275mod=n.Pb({type:t}),t.\u0275inj=n.Ob({factory:function(i){return new(i||t)},imports:[[e.d.forChild(_t)],e.d]}),t})();var Rt=o("W/RB"),At=o("tk/3"),St=o("x4Iw"),Gt=o("212I");let Wt=(()=>{class t{}return t.\u0275mod=n.Pb({type:t}),t.\u0275inj=n.Ob({factory:function(i){return new(i||t)},providers:[{provide:At.a,useClass:St.a,multi:!0},{provide:At.a,useClass:Gt.a,multi:!0}],imports:[[Rt.a,Tt]]}),t})()}}]);